<script>
    export default {
        name: "SaveLoadSimple",

        data () {
            return {
                parsed_parameters: {},
            }
        },

        methods: {
            save_page_simple() {
                let payload = {
                    model_page_name: this.model_page_name,
                    data: this.input_data
                };

                this.$store.commit('save_page', payload)
            },

            load_page_simple() {
                if (this.model_page_name in this.$store.state.frontend_state) {
                    this.input_data = this.$store.state.frontend_state[this.model_page_name]
                }
            },

            parse_simple_pages() {
                let select_data = this.$store.state.frontend_state["model_selection"];
                if (select_data ) { this.parsed_parameters["model_selection"] = select_data}

                let battery_data = this.$store.state.frontend_state["model_battery"];
                if (battery_data) { this.parsed_parameters["model_battery"] = battery_data }

                let solar_data = this.$store.state.frontend_state["model_solar"];
                if (solar_data) { this.parsed_parameters["model_solar"] = solar_data }
            },

            parse_all_table_pages() {
                let f_data = this.$store.state.frontend_state["model_financing"];
                if (f_data) {
                    this.parsed_parameters["model_financing"] = this.parse_table_page(f_data)
                }

                let p_data = this.$store.state.frontend_state["model_participants"];
                if (p_data) {
                    this.parsed_parameters["model_participants"] = this.parse_table_page(p_data)
                }

                let t_data = this.$store.state.frontend_state["model_tariffs"];
                if (t_data) {
                    this.parsed_parameters["model_tariffs"] = this.parse_table_page(t_data)
                }
            },

            parse_table_page(data) {
                // console.log("Participants Params: ", data);

                let parsed_data = [];

                for (let i = 0; i < data.table_rows.length; i++) {
                    let row = data.table_rows[i].row_inputs;
                    let row_data = [];

                    for (let j = 0; j < row.length; j++) {
                        row_data.push({
                            "name": row[j].name,
                            "value": row[j].value
                        })
                    }
                    parsed_data.push({
                        row_id: i,
                        row_inputs: row_data
                    })
                }

                return parsed_data;
            },
        },
    }
</script>